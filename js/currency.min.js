function Currency(a){this.currency=a,this.toNumber=function(a){if(this.isNumeric(a))return parseFloat(a);a+=" ",a=a.replace(/&.*?;/,"",a);for(var b="",c=!1,d=0;d<a.length;d++){var e=a.substr(d,1);parseInt(e)>=0&&parseInt(e)<=9||","==e||"."==e?b+=e:"-"==e&&(c=!0)}for(var f="",g=this.currency&&this.currency.decimal_separator?this.currency.decimal_separator:".",d=0;d<b.length;d++){var h=b.substr(d,1);h>="0"&&"9">=h?f+=h:h==g&&(f+=".")}return c&&(f="-"+f),this.isNumeric(f)?parseFloat(f):!1},this.toMoney=function(a){if(this.isNumeric(a)||(a=this.toNumber(a)),a===!1)return"";a+="",negative="","-"==a[0]&&(negative="-",a=parseFloat(a.substr(1))),money=this.numberFormat(a,this.currency.decimals,this.currency.decimal_separator,this.currency.thousand_separator);var b=this.currency.symbol_left?this.currency.symbol_left+this.currency.symbol_padding:"",c=this.currency.symbol_right?this.currency.symbol_padding+this.currency.symbol_right:"";return money=negative+this.htmlDecode(b)+money+this.htmlDecode(c),money},this.numberFormat=function(a,b,c,d){a=(a+"").replace(",","").replace(" ","");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):0,g="undefined"==typeof d?",":d,h="undefined"==typeof c?".":c,i="",j=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)},this.isNumeric=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},this.htmlDecode=function(a){var b,c,d=a,e=d.match(/&#[0-9]{1,5};/g);if(null!=e)for(var f=0;f<e.length;f++)c=e[f],b=c.substring(2,c.length-1),d=b>=-32768&&65535>=b?d.replace(c,String.fromCharCode(b)):d.replace(c,"");return d}}